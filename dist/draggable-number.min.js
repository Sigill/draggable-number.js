!function(a,b){"function"==typeof define&&define.amd?define(["exports"],function(c){a.DraggableNumber=b(a,c)}):"undefined"!=typeof exports?b(a,exports):a.DraggableNumber=b(a,{})}(this,function(a,b){var c=function(a){this.elements=a,this.init()};c.prototype={constructor:c,init:function(){for(var a=this.elements.length-1;a>=0;a--)new c.Element(this.elements[a])}},c.MODIFIER_NONE=0,c.MODIFIER_LARGE=1,c.MODIFIER_SMALL=2;var d=function(a,b){return function(){return a.apply(b,arguments)}};return c.Element=function(a){this.input=a,this.span=document.createElement("span"),this.isDragging=!1,this.lastMousePosition={x:0,y:0},this.value=0,this.dragThreshold=10,this.inputDisplayStyle="",this.spanDisplayStyle="",this.init()},c.Element.prototype={constructor:c.Element,init:function(){this.value=parseFloat(this.input.value,10),this.addSpan(),this.inputDisplayStyle=this.input.style.display,this.spanDisplayStyle=this.span.style.display,this.input.style.display="none",this.onMouseUp=d(this.onMouseUp,this),this.onMouseMove=d(this.onMouseMove,this),this.onMouseDown=d(this.onMouseDown,this),this.onInputBlur=d(this.onInputBlur,this),this.onInputKeyDown=d(this.onInputKeyDown,this),this.span.addEventListener("mousedown",this.onMouseDown,!1),this.input.addEventListener("blur",this.onInputBlur,!1),this.input.addEventListener("keypress",this.onInputKeyDown,!1)},destroy:function(){this.span.parentNode&&this.span.parentNode.removeChild(this.span)},addSpan:function(){var a=this.input.parentNode;a.insertBefore(this.span,this.input),this.span.innerHTML=this.value,this.span.style["-moz-user-select"]="none",this.span.style["-webkit-user-select"]="none",this.span.style["-ms-user-select"]="none",this.span.style["user-select"]="none",this.span.style.cursor="col-resize",this.span.addEventListener("selectstart",function(){return!1})},showInput:function(){this.input.style.display=this.inputDisplayStyle,this.span.style.display="none",this.input.focus()},showSpan:function(){this.input.style.display="none",this.span.style.display=this.spanDisplayStyle},onInputBlur:function(){this.value=parseFloat(this.input.value,10),this.updateNumber(0),this.showSpan()},onInputKeyDown:function(a){var b=13;a.charCode==b&&this.input.blur()},onMouseDown:function(a){this.isDragging=!1,this.lastMousePosition={x:a.clientX,y:-1*a.clientY},document.addEventListener("mouseup",this.onMouseUp,!1),document.addEventListener("mousemove",this.onMouseMove,!1)},onMouseUp:function(){this.isDragging===!1&&this.showInput(),this.isDragging=!1,document.removeEventListener("mouseup",this.onMouseUp,!1),document.removeEventListener("mousemove",this.onMouseMove,!1)},hasMovedEnough:function(a,b){return Math.abs(a.x-b.x)>=this.dragThreshold||Math.abs(a.y-b.y)>=this.dragThreshold?!0:!1},onMouseMove:function(a){var b={x:a.clientX,y:-1*a.clientY};if(this.hasMovedEnough(b,this.lastMousePosition)&&(this.isDragging=!0),this.isDragging!==!1){var d=c.MODIFIER_NONE;a.shiftKey?d=c.MODIFIER_LARGE:a.ctrlKey&&(d=c.MODIFIER_SMALL);var e=this.getLargestDelta(b,this.lastMousePosition),f=this.getNumberOffset(e,d);this.updateNumber(f),this.lastMousePosition=b}},getNumberOffset:function(a,b){var d=1;return b==c.MODIFIER_SMALL?d*=.1:b==c.MODIFIER_LARGE&&(d*=10),0>a&&(d*=-1),d},updateNumber:function(a){this.value+=a,this.input.value=this.value,this.span.innerHTML=this.value},getLargestDelta:function(a,b){var c={x:a.x-b.x,y:a.y-b.y};return Math.abs(c.x)>Math.abs(c.y)?c.x:c.y}},b.DraggableNumber=c,c});